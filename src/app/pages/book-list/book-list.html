<div class="container my-4">
  <h2 class="mb-4">Book List</h2>

  <!-- Error -->
  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <!-- Books -->
  <div *ngFor="let book of books" class="card mb-3 shadow-sm">
    <div class="card-body d-flex justify-content-between align-items-start">
      <div>
        <h5 class="card-title">{{ book.name }}</h5>
        <p class="card-text">Quantity: {{ book.quantity }}</p>
        <span class="badge" [ngClass]="{
          'bg-success': book.quantity > 0,
          'bg-danger': book.quantity <= 0
        }">
          {{ book.quantity > 0 ? 'Available' : 'Not Available' }}
        </span>
      </div>

      <div class="d-flex gap-2">
   <button 
  *ngIf="book.quantity > 0 && !hasBorrowedThisBook(book.id) && !hasAnyBorrowedBook()" 
  (click)="borrow(book.id)" 
  class="btn btn-outline-primary btn-sm">
  <i class="bi bi-arrow-down-circle"></i> Borrow
</button>

<!-- Show "Return" if the user has borrowed this book -->
<button 
  *ngIf="hasBorrowedThisBook(book.id)" 
  (click)="return(book.id)" 
  class="btn btn-outline-warning btn-sm">
  <i class="bi bi-arrow-return-left"></i> Return
</button>


        <!-- Delete button for Admin -->
        <button *ngIf="isAdmin" 
                class="btn btn-outline-danger btn-sm" 
                (click)="deleteBook(book.id)">
          <i class="bi bi-trash"></i> Delete
        </button>
      </div>
    </div>
  </div>
</div>
